{{ 'reviews.css' | asset_url | stylesheet_tag }}

<div class="reviews-section">
  <div class="container">
    {%- if section.settings.category_label != blank -%}
      <div class="reviews-section__category">
        {{ section.settings.category_label }}
      </div>
    {%- endif -%}

    {%- if section.settings.title != blank -%}
      <h2 class="reviews-section__title">{{ section.settings.title }}</h2>
    {%- endif -%}

    {%- if section.settings.show_rating -%}
      <div class="reviews-section__rating">
        <div class="reviews-section__stars">
          {%- for i in (1..5) -%}
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M10 0L12.2451 6.90983H19.5106L13.6327 11.1803L15.8779 18.0902L10 13.8197L4.12215 18.0902L6.36729 11.1803L0.489435 6.90983H7.75486L10 0Z" fill="#00B67A"/>
            </svg>
          {%- endfor -%}
        </div>
        <span class="reviews-section__rating-text">{{ section.settings.rating }}/5</span>
      </div>
    {%- endif -%}

    {%- if section.settings.show_trustpilot -%}
      <div class="reviews-section__trustpilot">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M10 0L12.2451 6.90983H19.5106L13.6327 11.1803L15.8779 18.0902L10 13.8197L4.12215 18.0902L6.36729 11.1803L0.489435 6.90983H7.75486L10 0Z" fill="#00B67A"/>
        </svg>
        <span class="reviews-section__trustpilot-text">Trustpilot</span>
        {%- if section.settings.review_count != blank -%}
          <span class="reviews-section__review-count">Based on {{ section.settings.review_count }} reviews</span>
        {%- endif -%}
      </div>
    {%- endif -%}

    {%- if section.blocks.size > 0 -%}
      <div class="reviews-section__grid">
        {%- for block in section.blocks -%}
          <div class="reviews-section__card" {{ block.shopify_attributes }}>
            <div class="reviews-section__quote-icon">
              <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M26.6667 5C25.7826 5 24.9348 5.35119 24.3097 5.97631C23.6845 6.60143 23.3333 7.44928 23.3333 8.33333V18.3333C23.3333 19.2174 23.6845 20.0652 24.3097 20.6904C24.9348 21.3155 25.7826 21.6667 26.6667 21.6667C27.1087 21.6667 27.5326 21.8423 27.8452 22.1548C28.1577 22.4674 28.3333 22.8913 28.3333 23.3333V25C28.3333 25.8841 27.9822 26.7319 27.357 27.357C26.7319 27.9821 25.8841 28.3333 25 28.3333C24.558 28.3333 24.1341 28.5089 23.8215 28.8215C23.5089 29.134 23.3333 29.558 23.3333 30V33.3333C23.3333 33.7754 23.5089 34.1993 23.8215 34.5118C24.1341 34.8244 24.558 35 25 35C27.6522 35 30.1957 33.9464 32.0711 32.0711C33.9464 30.1957 35 27.6522 35 25V8.33333C35 7.44928 34.6488 6.60143 34.0237 5.97631C33.3986 5.35119 32.5507 5 31.6667 5H26.6667Z" stroke="#18A9A2" stroke-opacity="0.2" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M8.33333 5C7.44928 5 6.60143 5.35119 5.97631 5.97631C5.35119 6.60143 5 7.44928 5 8.33333V18.3333C5 19.2174 5.35119 20.0652 5.97631 20.6904C6.60143 21.3155 7.44928 21.6667 8.33333 21.6667C8.77536 21.6667 9.19928 21.8423 9.51184 22.1548C9.8244 22.4674 10 22.8913 10 23.3333V25C10 25.8841 9.64881 26.7319 9.02369 27.357C8.39857 27.9821 7.55072 28.3333 6.66667 28.3333C6.22464 28.3333 5.80072 28.5089 5.48816 28.8215C5.17559 29.134 5 29.558 5 30V33.3333C5 33.7754 5.17559 34.1993 5.48816 34.5118C5.80072 34.8244 6.22464 35 6.66667 35C9.31883 35 11.8624 33.9464 13.7377 32.0711C15.6131 30.1957 16.6667 27.6522 16.6667 25V8.33333C16.6667 7.44928 16.3155 6.60143 15.6904 5.97631C15.0652 5.35119 14.2174 5 13.3333 5H8.33333Z" stroke="#18A9A2" stroke-opacity="0.2" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>

            <div class="reviews-section__card-stars">
              {%- for i in (1..5) -%}
                <svg width="16" height="16" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M10 0L12.2451 6.90983H19.5106L13.6327 11.1803L15.8779 18.0902L10 13.8197L4.12215 18.0902L6.36729 11.1803L0.489435 6.90983H7.75486L10 0Z" fill="#00B67A"/>
                </svg>
              {%- endfor -%}
            </div>

            {%- if block.settings.review_text != blank -%}
              <p class="reviews-section__card-text">{{ block.settings.review_text }}</p>
            {%- endif -%}

            <div class="reviews-section__card-separator"></div>

            <div class="reviews-section__card-author">
              {%- if block.settings.author_image != blank -%}
                <div class="reviews-section__card-avatar">
                  {{ block.settings.author_image | image_url: width: 60 | image_tag: alt: block.settings.author_name, loading: 'lazy' }}
                </div>
              {%- endif -%}
              <div class="reviews-section__card-author-info">
                {%- if block.settings.author_name != blank -%}
                  <p class="reviews-section__card-name">{{ block.settings.author_name }}</p>
                {%- endif -%}
                {%- if block.settings.author_location != blank -%}
                  <p class="reviews-section__card-location">{{ block.settings.author_location }}</p>
                {%- endif -%}
              </div>
            </div>
          </div>
        {%- endfor -%}
      </div>
    {%- endif -%}

    <div class="reviews-section__footer">
      {%- if section.settings.read_all_link != blank -%}
        <a href="{{ section.settings.read_all_link }}" class="reviews-section__read-all">
          {{ section.settings.read_all_text | default: "READ ALL REVIEWS" }}
        </a>
      {%- else -%}
        <span class="reviews-section__read-all">
          {{ section.settings.read_all_text | default: "READ ALL REVIEWS" }}
        </span>
      {%- endif -%}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Reviews",
  "class": "shopify-section--reviews",
  "tag": "section",
  "settings": [
    {
      "type": "text",
      "id": "category_label",
      "label": "Category Label",
      "default": "TESTIMONIALS"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Loved by Thousands"
    },
    {
      "type": "header",
      "content": "Rating Settings"
    },
    {
      "type": "checkbox",
      "id": "show_rating",
      "label": "Show Overall Rating",
      "default": true
    },
    {
      "type": "text",
      "id": "rating",
      "label": "Rating",
      "default": "4.9",
      "info": "Enter the rating number (e.g., 4.9)"
    },
    {
      "type": "header",
      "content": "Trustpilot Settings"
    },
    {
      "type": "checkbox",
      "id": "show_trustpilot",
      "label": "Show Trustpilot",
      "default": true
    },
    {
      "type": "text",
      "id": "review_count",
      "label": "Review Count",
      "default": "2,847",
      "info": "Enter the number of reviews (e.g., 2,847)"
    },
    {
      "type": "header",
      "content": "Footer Link"
    },
    {
      "type": "text",
      "id": "read_all_text",
      "label": "Read All Reviews Text",
      "default": "READ ALL REVIEWS"
    },
    {
      "type": "url",
      "id": "read_all_link",
      "label": "Read All Reviews Link"
    }
  ],
  "blocks": [
    {
      "type": "review",
      "name": "Review",
      "settings": [
        {
          "type": "richtext",
          "id": "review_text",
          "label": "Review Text",
          "default": "<p>The quality of products is exceptional. My skin has never looked better. BeautyHeaven is my go-to for all skincare needs.</p>"
        },
        {
          "type": "image_picker",
          "id": "author_image",
          "label": "Author Image"
        },
        {
          "type": "text",
          "id": "author_name",
          "label": "Author Name",
          "default": "Emma Larsen"
        },
        {
          "type": "text",
          "id": "author_location",
          "label": "Author Location",
          "default": "Oslo, Norway"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Reviews",
      "blocks": [
        {
          "type": "review",
          "settings": {
            "review_text": "<p>The quality of products is exceptional. My skin has never looked better. BeautyHeaven is my go-to for all skincare needs.</p>",
            "author_name": "Emma Larsen",
            "author_location": "Oslo, Norway"
          }
        },
        {
          "type": "review",
          "settings": {
            "review_text": "<p>Fast delivery, beautiful packaging, and authentic products. I trust BeautyHeaven completely for my beauty routine.</p>",
            "author_name": "Sofia Andersen",
            "author_location": "Bergen, Norway"
          }
        },
        {
          "type": "review",
          "settings": {
            "review_text": "<p>Amazing customer service and expert recommendations. They truly care about helping you find the right products.</p>",
            "author_name": "Ingrid Hansen",
            "author_location": "Trondheim, Norway"
          }
        }
      ]
    }
  ]
}
{% endschema %}
